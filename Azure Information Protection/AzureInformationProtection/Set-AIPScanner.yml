### YamlMime:PowershellCmdlet
summary: |-
  **Relevant for:** AIP unified labeling and classic clients

  Sets the service account and database for the Azure Information Protection scanner.
module: AzureInformationProtection
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href="System.Object" data-throw-if-not-resolved="False" />
  description: ""
links:
- text: Get-AIPScannerConfiguration
  href: ./Get-AIPScannerConfiguration.yml
- text: Get-AIPScannerStatus
  href: ./Get-AIPScannerStatus.yml
- text: Install-AIPScanner
  href: ./Install-AIPScanner.yml
- text: Set-AIPScannerConfiguration
  href: ./Set-AIPScannerConfiguration.yml
- text: Start-AIPScan
  href: ./Start-AIPScan.yml
- text: Uninstall-AIPScanner
  href: ./Uninstall-AIPScanner.yml
- text: Update-AIPScanner
  href: ./Update-AIPScanner.yml
syntaxes:
- >-
  Set-AIPScanner [[-SqlServerInstance] <String>] [-ServiceUserCredentials] <PSCredential>

   [-StandardDomainsUserAccount <PSCredential>] [-ShareAdminUserAccount <PSCredential>] [-Cluster | -Profile <String>] [-Force] 

   [<CommonParameters>]
examples:
- title: 'Example 1: Change the database and cluster for the Azure Information Protection scanner'
  code: |-
    PS C:\> Set-AIPScanner -SqlServerInstance SERVER1\AIPSCANNER -Cluster EU

    Azure Information Protection Scanner service configuration change completed successfully.
  description: |-
    This command configures the Azure Information Protection scanner to use the SQL Server database instance named **AIPSCANNER** on the server named **SERVER1**, using the scanner configuration database named **AIPScanner_EU**.
  summary: ""
parameters:
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Cluster
  isRequired: true
  description: |+
    **Relevant for:** Unified labeling client only.

    Specifies the configured name of the scanner's database, used to identify the scanner you want to set details for.

    Use the following syntax: **AIPScannerUL_<cluster_name>**. 

    Using either this parameter or the **Profile** parameter is mandatory. Starting in version 2.7.0.0 of the unified labeling client, we recommend using this parameter instead of the **Profile** parameter.


  defaultValue: None
  position: Named
  aliases: Profile
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Force
  description: |+
    Forces the command to run without asking for user confirmation.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: ServiceUserCredentials
  isRequired: true
  description: |+
    Specifies the account credentials used to run the Azure Information Protection service. 

    - The credentials used must be an Active Directory account. 

    - Set the value of this parameter using the following syntax: `Domain\Username`. 

        For example: `contoso\scanneraccount`

    - If you do not specify this parameter, you are prompted for the username and password.

    For more information, see [Prerequisites for the Azure Information Protection scanner](/information-protection/deploy-aip-scanner#prerequisites-for-the-azure-information-protection-scanner). 

    > [!TIP]
    > Use a **PSCredential** object by using the [Get-Credential](/powershell/module/microsoft.powershell.security/get-credential) cmdlet. In this case, you are prompted for the password only.
    >
    > For more information, type `Get-Help Get-Cmdlet`. 

  defaultValue: None
  position: "0"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: ShareAdminUserAccount
  description: |+
    Specifies the credentials for a strong account in an on-premises network, used to get a full list of file share and NTFS permissions.

    - The credentials used must be an Active Directory account with Administrator/FC rights on your network shares. This will usually be a Server Admin or Domain Admin.

    - Set the value of this parameter using the following syntax: `Domain\Username`

        For example: `contoso\admin`

    - If you do not specify this parameter, you are prompted for both the username and password.

    > [!TIP]
    > Use a **PSCredential** object by using the [**Get-Credential**](/powershell/module/microsoft.powershell.security/get-credential) cmdlet. In this case, you are prompted for the password only.
    > 
    >For more information, type `Get-Help Get-Cmdlet`.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: SqlServerInstance
  description: |+
    Specifies the new SQL Server instance on which to create a database for the Azure Information Protection scanner.

    For information about the SQL Server requirements, see [Prerequisites for the Azure Information Protection scanner](/azure/information-protection/deploy-aip-scanner#prerequisites-for-the-azure-information-protection-scanner).

    For the default instance, specify the server name. For example: **SQLSERVER1**.

    For a named instance, specify the server name and instance name. For example: **SQLSERVER1\AIPSCANNER**.

    For SQL Server Express, specify the server name and SQLEXPRESS. For example: **SQLSERVER1\SQLEXPRESS**.

  defaultValue: None
  position: "2"
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: StandardDomainsUserAccount
  description: |+
    Specifies the credentials for a weak account in an on-premises network, used to check access for weak users on the network and expose discovered network shares.

    - The credentials used must be an Active Directory account, and a user of the **Domain Users** group only.

    - Set the value of this parameter using the following syntax: `Domain\Username`

        For example: `contoso\stduser`

    - If you do not specify this parameter, you are prompted for both the username and password.

    > [!TIP]
    > Use a **PSCredential** object by using the [**Get-Credential**](/powershell/module/microsoft.powershell.security/get-credential) cmdlet. In this case, you are prompted for the password only.
    > 
    >For more information, type `Get-Help Get-Cmdlet`.

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: AzureInformationProtection.Set-AIPScanner
name: Set-AIPScanner
description: |-
  The **Set-AIPScanner** cmdlet updates the service account and SQL Server database instance for the Azure Information Protection scanner. 

  Use this command when you want to change the account or database details that was previously specified, for example, when you installed the scanner by running the [Install-AIPScanner](./Install-AIPScanner.yml) cmdlet.

  The new configuration takes effects when the Azure Information Protection Scanner service is next started. This cmdlet does not automatically restart this service.

  > [!NOTE]
  > To provide a unified and streamlined customer experience, the **Azure Information Protection classic client** and **Label Management** in the Azure Portal are being **deprecated** as of **March 31, 2021**. 
  > 
  > This time-frame allows all current Azure Information Protection customers to transition to our unified labeling solution using the Microsoft Information Protection Unified Labeling platform. Learn more in the official [deprecation notice](https://aka.ms/aipclassicsunset).
metadata:
  external help file: AIP.dll-Help.xml
  Module Name: AzureInformationProtection
  online version: https://go.microsoft.com/fwlink/?linkid=858209
  schema: 2.0.0
